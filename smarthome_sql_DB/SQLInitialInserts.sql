INSERT INTO RealEstate VALUES(
'Poljička cesta 65',
'Split',
'021 230 457'
),
(
'Vukovarska ulica 27',
'Zagreb',
'01 555 333'
)



INSERT INTO House_User VALUES
('Ante', 'Petric', 'm', 'apetric@gmail.com', '12345678', '12345678', '0991234567', 13),
('Nikolina', 'Petric', 'f', 'npetric@gmail.com', '12345678', '12345678', '0991234568', 13),
('Matea', 'Petric', 'f', 'mpetric@gmail.com', '12345678', '12345678', '0991234569', 13),
('Mirko', 'Martinovic', 'm', 'mmartinovic@gmail.com', '12345678', '12345678', '0911234567', 14),
('Jana', 'Martinovic', 'f', 'jmartinovic@gmail.com', '12345678', '12345678', '0911234568', 14),
('Petar', 'Martinovic', 'm', 'pmartinovic@gmail.com', '12345678', '12345678', '0911234569', 14),
('Tina', 'Martinovic', 'f', 'tmartinovic@gmail.com', '12345678', '12345678', '0911234561', 14)


INSERT INTO Room VALUES 
('Garge', 14, 13),
('Garage', 14, 14),
('Home office', 5, 13),
('Terrace', 20, 13),
('Back garden', 30, 13),
('Garden', 30, 14),
('Hall', 10, 13 ),
('Bathroom1', 12, 13 ),
('Bathroom2', 8, 13 ),
('Kitchen', 20, 13 ),
('LivingRoom', 18, 13 ),
('Bedroom1', 8, 13 ),
('Bedroom2', 10, 13 ),
('Bedroom3', 12, 13 ),
('DiningRoom', 6, 13 ),
('Hall', 5, 14 ),
('Bathroom', 10, 14 ),
('Kitchen', 20, 14 ),
('LivingRoom', 18, 14 ),
('Bedroom1', 8, 14 ),
('Bedroom2', 10, 14 ),
('Bedroom3', 8, 14 ),
('DiningRoom', 6, 14 )


INSERT INTO Device_Type
VALUES
('Shower', 1),
('Sink', 1),
('Lock', 1),
('Television', 1),
('Audio system', 1),
('Media player', 1),
('Air conditioner', 1),
('Light', 1),
('Curtains', 1),
('Power strip', 1),
('Charging plug', 1),
('Radiator', 1),
('Alarm clock', 1),
('Refrigerator', 1),
('Oven', 1),
('Microwave', 1),
('Dishwasher', 1),
('Electric kettle', 1),
('Coffee maker', 1),
('Stove', 1),
('Underfloor heating', 1
),('Ventilation fan', 1
),('LED mirror', 1
),('Temperature sensor', 2),
('Computer', 1
),('Monitor', 1
),('Printer', 1
),('Irrigation system', 1
),('Outdoor speakers', 1
),('Grill', 1
),('Awning', 1
),('Light Sensor', 2),
('Humidity Sensor', 2),
('Smoke Sensor', 2),
('Water temperature sensor', 2)

INSERT INTO Device VALUES
('Main Lock', 6, 4),
('Terrace Lock', 6, 22),
('Bathroom Lock', 6, 5),
('Bathroom Lock', 6, 6),
('Garage Lock',6, 25),
('Garage House Lock',6, 25),
('Ceiling Light', 11, 4),
('Ceiling Light', 11, 5),
('Ceiling Light', 11, 6),
('Ceiling Light', 11, 7),
('Ceiling Light', 11, 8),
('Ceiling Light', 11, 9),
('Ceiling Light', 11, 10),
('Ceiling Light', 11, 11),
('Ceiling Light', 11, 12),
('Ceiling Light', 11, 21),
('Ceiling Light', 11, 22),
('Ceiling Light', 11, 25),
('Floor lamp 1', 11, 8),
('Floor lamp 2', 11, 8),
('Floor lamp', 11, 9),
('Floor lamp', 11, 10),
('Floor lamp', 11, 11),
('Curtains', 12, 4),
('Curtains', 12, 5),
('Curtains', 12, 6),
('Curtains1', 12, 7),
('Curtains2', 12, 7),
('Curtains', 12, 9),
('Curtains', 12, 10),
('Curtains', 12, 11),
('Curtains1', 12, 8),
('Curtains2', 12, 8),
('Curtains', 12, 21),
('TV', 7, 8),
('TV', 7, 9),
('TV', 7, 10),
('TV', 7, 11),
('TV', 7, 21),
('Floor heater', 24, 5),
('Floor heater', 24, 6),
('Floor heater', 24, 8),
('Alarm', 16, 9),
('Alarm', 16, 10),
('Alarm', 16, 11),
('Radiator', 15, 5),
('Radiator', 15, 6),
('Radiator', 15, 8),
('Radiator', 15, 7),
('Radiator', 15, 9),
('Radiator', 15, 10),
('Radiator', 15, 11),
('Radiator', 15, 21),
('Radiator', 15, 12),
('Fridge', 17, 7),
('Oven1', 18, 7),
('Oven2', 18, 7),
('Microwave', 19, 7),
('Dishwasher', 20, 7),
('Kettle', 21, 7),
('Coffie', 22, 7),
('Stove', 23, 7),
('Mirror', 26, 5),
('Mirror', 26, 6),
('Mirror', 26, 4),
('Computer', 28, 21),
('Monitor', 29, 21),
('Printer', 30, 21),
('Grill', 33, 22),
('Awning1', 34, 22),
('Awning2', 34, 22),
('Shower', 39, 5),
('Shower', 39, 6),
('Sink', 40, 5),
('Sink', 40, 6),
('Kitchen sink', 40, 7),
('Speakers', 32, 22),
('Music', 8, 8),
('Air conditioner', 10, 4),
('Air conditioner', 10, 5),
('Air conditioner', 10, 6),
('Air conditioner', 10, 7),
('Air conditioner', 10, 8),
('Air conditioner', 10, 9),
('Air conditioner', 10, 10),
('Air conditioner', 10, 11),
('Air conditioner', 10, 12),
('Air conditioner', 10, 21),
('Light sensor', 35, 4),
('Light sensor', 35, 5),
('Light sensor', 35, 6),
('Light sensor', 35, 7),
('Light sensor', 35, 8),
('Light sensor', 35, 9),
('Light sensor', 35, 10),
('Light sensor', 35, 11),
('Light sensor', 35, 12),
('Light sensor', 35, 21),
('Light sensor', 35, 25),
('Temperature sensor', 27, 4),
('Temperature sensor', 27, 5),
('Temperature sensor', 27, 6),
('Temperature sensor', 27, 7),
('Temperature sensor', 27, 8),
('Temperature sensor', 27, 9),
('Temperature sensor', 27, 10),
('Temperature sensor', 27, 11),
('Temperature sensor', 27, 12),
('Temperature sensor', 27, 21),
('Temperature sensor', 27, 25),
('Humidity sensor', 36, 4),
('Humidity sensor', 36, 5),
('Humidity sensor', 36, 6),
('Humidity sensor', 36, 7),
('Humidity sensor', 36, 8),
('Humidity sensor', 36, 9),
('Humidity sensor', 36, 10),
('Humidity sensor', 36, 11),
('Humidity sensor', 36, 12),
('Humidity sensor', 36, 21),
('Humidity sensor', 36, 25),
('Water-Shower temp sensor', 38, 5),
('Water-Shower temp sensor', 38, 6),
('Water-Sink temp sensor', 38, 6),
('Water-Sink temp sensor', 38, 5),
('Water-Sink temp sensor', 38, 7),
('Charging plug1', 14, 4),
('Charging plug2', 14, 4),
('Charging plug1', 14, 5),
('Charging plug2', 14, 5),
('Charging plug1', 14, 6),
('Charging plug2', 14, 6),
('Charging plug1', 14, 7),
('Charging plug2', 14, 7),
('Charging plug1', 14, 8),
('Charging plug2', 14, 8),
('Charging plug1', 14, 9),
('Charging plug2', 14, 9),
('Charging plug1', 14, 10),
('Charging plug2', 14, 10),
('Charging plug1', 14, 11),
('Charging plug2', 14, 11),
('Charging plug1', 14, 12),
('Charging plug2', 14, 12),
('Charging plug1', 14, 21),
('Charging plug2', 14, 21),
('Charging plug1', 14, 22),
('Charging plug2', 14, 22),
('Charging plug', 14, 23),
('Charging plug1', 14, 25),
('Charging plug2', 14, 25)

SELECT * FROM Room WHERE ID_RealEstate=13;

INSERT INTO Device VALUES
('Main Lock', 6, 13),
('Terrace Lock', 6,24),
('Bathroom Lock', 6,14),
('Garage Lock',6,26),
('Garage House Lock',6,26),
('Ceiling Light', 11, 13),
('Ceiling Light', 11,14),
('Ceiling Light', 11,15),
('Ceiling Light', 11,16),
('Ceiling Light', 11,17),
('Ceiling Light', 11,18),
('Ceiling Light', 11,19),
('Ceiling Light', 11,20),
('Ceiling Light', 11,24),
('Ceiling Light', 11,26),
('Floor lamp 1', 11,16),
('Floor lamp 2', 11,16),
('Floor lamp', 11,17),
('Floor lamp', 11,18),
('Floor lamp', 11,19),
('Curtains', 12, 13),
('Curtains', 12,14),
('Curtains1', 12,15),
('Curtains2', 12,15),
('Curtains', 12,17),
('Curtains', 12,18),
('Curtains', 12,19),
('Curtains1', 12,16),
('Curtains2', 12,16),
('TV', 7,16),
('TV', 7,17),
('TV', 7,18),
('TV', 7,19),
('Floor heater', 24,14),
('Floor heater', 24,16),
('Alarm', 16,17),
('Alarm', 16,18),
('Alarm', 16,19),
('Radiator', 15,14),
('Radiator', 15,16),
('Radiator', 15,15),
('Radiator', 15,17),
('Radiator', 15,18),
('Radiator', 15,19),
('Radiator', 15,20),
('Fridge', 17,15),
('Oven1', 18,15),
('Oven2', 18,15),
('Microwave', 19,15),
('Dishwasher', 20,15),
('Kettle', 21,15),
('Coffie', 22,15),
('Stove', 23,15),
('Mirror', 26,14),
('Mirror', 26, 13),
('Grill', 33,24),
('Awning1', 34,24),
('Awning2', 34,24),
('Shower', 39,14),
('Sink', 40,14),
('Kitchen sink', 40,15),
('Speakers', 32,24),
('Music', 8,16),
('Air conditioner', 10, 13),
('Air conditioner', 10,14),
('Air conditioner', 10,15),
('Air conditioner', 10,16),
('Air conditioner', 10,17),
('Air conditioner', 10,18),
('Air conditioner', 10,19),
('Air conditioner', 10,20),
('Light sensor', 35, 13),
('Light sensor', 35,14),
('Light sensor', 35,15),
('Light sensor', 35,16),
('Light sensor', 35,17),
('Light sensor', 35,18),
('Light sensor', 35,19),
('Light sensor', 35,20),
('Light sensor', 35,26),
('Temperature sensor', 27, 13),
('Temperature sensor', 27,14),
('Temperature sensor', 27,15),
('Temperature sensor', 27,16),
('Temperature sensor', 27,17),
('Temperature sensor', 27,18),
('Temperature sensor', 27,19),
('Temperature sensor', 27,20),
('Temperature sensor', 27,26),
('Humidity sensor', 36, 13),
('Humidity sensor', 36,14),
('Humidity sensor', 36,15),
('Humidity sensor', 36,16),
('Humidity sensor', 36,17),
('Humidity sensor', 36,18),
('Humidity sensor', 36,19),
('Humidity sensor', 36,20),
('Humidity sensor', 36,26),
('Water-Shower temp sensor', 38,14),
('Water-Sink temp sensor', 38,14),
('Water-Sink temp sensor', 38,15),
('Charging plug1', 14, 13),
('Charging plug2', 14, 13),
('Charging plug1', 14,14),
('Charging plug2', 14,14),
('Charging plug1', 14,15),
('Charging plug2', 14,15),
('Charging plug1', 14,16),
('Charging plug2', 14,16),
('Charging plug1', 14,17),
('Charging plug2', 14,17),
('Charging plug1', 14,18),
('Charging plug2', 14,18),
('Charging plug1', 14,19),
('Charging plug2', 14,19),
('Charging plug1', 14,20),
('Charging plug2', 14,20),
('Charging plug1', 14,24),
('Charging plug2', 14,24),
('Charging plug1', 14,26),
('Charging plug2', 14,26)

SELECT * FROM Room WHERE ID_RealEstate=14;


SELECT count(ID_Device) FROM Device group by ID_Room;
select * FROM RealEstate;
select * FROM House_User;
Select * from Room;
Select * from Device;
Select * from Category;
Select * from Device_Type;
select * from Settings;

--delete from RealEstate;
--delete from Settings;
select * from Settings inner join Device on Settings.ID_Device=Device.ID_Device;


-- unosi u settings

DECLARE @ID_Device INT;
DECLARE @ID_Type INT;
DECLARE @Name VARCHAR(50);
DECLARE @Settings_value VARCHAR(50);

DECLARE kur CURSOR FOR
SELECT d.ID_Device, d.ID_Type, dt.Name
FROM Device d
INNER JOIN Device_Type dt ON d.ID_Type = dt.ID_Type

OPEN kur;
FETCH NEXT FROM kur INTO @ID_Device, @ID_Type, @Name;

WHILE @@FETCH_STATUS = 0
BEGIN
    IF LOWER(@Name) LIKE '%air%' OR LOWER(@Name) LIKE '%temperature%' OR LOWER(@Name) LIKE '%refrigerator%' OR LOWER(@Name) LIKE '%microwave%' OR LOWER(@Name) LIKE '%dishwasher%' OR LOWER(@Name) LIKE '%kettle%' OR LOWER(@Name) LIKE '%stove%' OR LOWER(@Name) LIKE '%heating%'
		BEGIN
			    SET @Settings_value = '18';
			    INSERT INTO Settings (Name, Settings_value, ID_Device)
			    VALUES ('minValue', @Settings_value, @ID_Device);

			    SET @Settings_value = '28';
			    INSERT INTO Settings (Name, Settings_value, ID_Device)
			    VALUES ('maxValue', @Settings_value, @ID_Device);

			    SET @Settings_value = '°C';
			    INSERT INTO Settings (Name, Settings_value, ID_Device)
			    VALUES ('measure', @Settings_value, @ID_Device);
		END
	ELSE
		BEGIN
				SET @Settings_value = '0';
			    INSERT INTO Settings (Name, Settings_value, ID_Device)
			    VALUES ('minValue', @Settings_value, @ID_Device);

			    SET @Settings_value = '100';
			    INSERT INTO Settings (Name, Settings_value, ID_Device)
			    VALUES ('maxValue', @Settings_value, @ID_Device);

			    SET @Settings_value = '%';
			    INSERT INTO Settings (Name, Settings_value, ID_Device)
			    VALUES ('measure', @Settings_value, @ID_Device);
		END
    FETCH NEXT FROM kur INTO @ID_Device, @ID_Type, @Name;
END;

CLOSE kur;
DEALLOCATE kur;

INSERT INTO Settings (Name, Settings_value, ID_Device)
SELECT 'note', 'Unknown', d.ID_Device
FROM Device d
INNER JOIN Device_Type dt ON d.ID_Type = dt.ID_Type
WHERE dt.ID_Category = 1;

INSERT INTO Settings (Name, Settings_value, ID_Device)
SELECT 'controls', 
       CASE 
           WHEN dt.Name LIKE '%lock%' OR dt.Name LIKE '%power strip%' OR dt.Name LIKE '%plug%' OR dt.Name LIKE '%alarm%' OR dt.Name LIKE '%computer%' OR dt.Name LIKE '%monitor%' OR dt.Name LIKE '%printer%' THEN 'basic'
           WHEN dt.Name LIKE '%audio%' OR dt.Name LIKE '%television%' OR dt.Name LIKE '%media%' OR dt.Name LIKE '%microwave%' OR dt.Name LIKE '%dishwasher%' OR dt.Name LIKE '%kettle%' OR dt.Name LIKE '%coffe%' THEN 'full'
           ELSE 'semifull'
       END AS Settings_value,
       d.ID_Device
FROM Device d
INNER JOIN Device_Type dt ON d.ID_Type = dt.ID_Type
WHERE dt.ID_Category = 1;

INSERT INTO Category
VALUES (
	'Periphery'
)

SELECT * FROM Category;

INSERT INTO Device_Type
VALUES(
	'WiFi',
	3
)

SELECT * FROM Device_Type;

INSERT INTO Device
VALUES 
('WiFi', 41, 4),
('WiFi', 41, 13)